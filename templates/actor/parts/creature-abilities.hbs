<h3 class="table-header">Ability Scores</h3>
<div id="ability-points-counter" style="display: none">
  <span id="ability-points-msg"></span>
</div>
<table class="newera-actorsheet-table">
  <tr>
    <th>ABILITY</th>
    <th>SCORE</th>
    <th>MODIFIER</th>
  </tr>
  {{#each system.abilities as |ability key|}}
    <tr>
      <td style="width: 35%">
        <span class="rollable" data-roll="d20+@abilities.{{key}}.mod" data-label="{{ability.label}} Ability Check">
          <img class="skill-icon" src="{{ability.image}}" />
          {{ability.label}}
        </span>
      </td>
      <td style="width: 20%"><input type="text" class="sheet-input" name="system.abilities.{{key}}.score" value="{{ability.score}}" data-dtype="Number" /></td>
      <input type="hidden"name="system.abilities.{{key}}.bonus" value="0" data-dtype="Number" />
      <td style="width: 15%">
        <span class="rollable sheet-output-major" data-roll="d20+@abilities.{{key}}.mod" data-label="{{ability.label}} Ability Check">
          {{numberFormat ability.mod decimals=0 sign=true}}
          <img class="die" src="systems/newera-sol366/resources/d20-orange.png" />
        </span>
      </td>
    </tr>
  {{/each}}
</table>

<h3 class="table-header">Saves</h3>
<table class="newera-actorsheet-table">
  <tr>
    <th>SAVE</th>
    <th>BONUS</th>
    <th>MODIFIER</th>
  </tr>
  {{#each system.saves as |save key|}}
    <tr>
      <td style="width: 30%">
        <span class="rollable" data-roll="d20+@saves.{{key}}.mod" data-label="{{save.label}} save">
          <img class="skill-icon" src="{{save.image}}" />
          {{save.label}}
        </span>
      </td>
      <td style="width: 15%"><input type="text" class="sheet-input" name="system.saves.{{key}}.bonus" value="{{save.bonus}}" data-dtype="Number" /></td>
      <td style="width: 15%">
        <span class="rollable sheet-output-major" data-roll="d20+@saves.{{key}}.mod" data-label="{{save.label}} save">
          {{numberFormat save.mod decimals=0 sign=true}}
          <img class="die" src="systems/newera-sol366/resources/d20-orange.png" />
        </span>
      </td>
    </tr>
  {{/each}}
</table>

<h3 class="table-header">Special Stats</h3>
<table class="newera-actorsheet-table">
  <tr>
    <th>NAME</th>
    <th>ABILITY</th>
    <th>BONUS</th>
    <th>MODIFIER</th>
  </tr>
  {{#each system.specialModifiers as |spec key|}}
  <tr>
    <td style="width: 30%"><input type="text" class="sheet-input" name="system.specialModifiers.{{key}}.subject" value="{{spec.subject}}" /></td>
    <td style="width: 30%">
      <select name="system.specialModifiers.{{key}}.parent" class="sheet-input">
          <option value="">(None)</option>
        {{#each ../system.abilities as |parent key2|}}
          <option value="{{key2}}" {{selected spec.parent key2}}>{{parent.label}}</option>
        {{/each}}
      </select>
    </td>
    <td style="width: 20%"><input type="number" class="sheet-input" name="system.specialModifiers.{{key}}.bonus" value="{{spec.bonus}}" data-dtype="Number" /></td>
    <td style="width: 20%">
      <span class="rollable sheet-output-major" data-roll="d20+@specialModifiers.{{key}}.mod" data-label="{{spec.label}}">
        {{numberFormat spec.mod decimals=0 sign=true}}
        <img class="die" src="systems/newera-sol366/resources/d20-orange.png" />
      </span>
      <a class="deleteSpecialModifier" data-special-modifier-index="{{key}}" data-tooltip="Delete Modifier" data-tooltip-direction="UP"><i class="fas fa-trash"></i></a>
    </td>
  </tr>
  {{/each}}
  <tr>
    <td colspan="6">
      <a title="Add Modifier" id="addSpecialModifierButton"><i class="fas fa-plus"></i> ADD MODIFIER</a>
    </td>
  </tr>
</table>
